cmake_minimum_required(VERSION 2.8)
set (CMAKE_ECLIPSE_VERSION 4.5.1)
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall")

#--------------------------------------------------------------------------------------------------#

project(Aggron)

#--------------------------------------------------------------------------------------------------#

set(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)

set (SRCS 
	./Service_Scheduler/src/Service_Scheduler.c 
	./Service_Lidar/src/Service_Lidar.c
	./Service_Log/src/Service_Log.c
	./Service_Configuration/src/Service_Configuration.c
	./Service_Autotests/src/Service_Autotests.c 
	./Service_Initialization/src/Service_Initialization.c
	./Service_ErrorReport/src/Service_ErrorReport.c
)   

set (HDRS
	${PROJECT_SOURCE_DIR}/Service_Autotests/inc
	${PROJECT_SOURCE_DIR}/Service_Lidar/inc
	${PROJECT_SOURCE_DIR}/Service_Scheduler/inc
	${PROJECT_SOURCE_DIR}/Service_Log/inc
	${PROJECT_SOURCE_DIR}/Service_Configuration/inc
	${PROJECT_SOURCE_DIR}/Service_Initialization/inc
	${PROJECT_SOURCE_DIR}/Service_Autotests/inc 
	${PROJECT_SOURCE_DIR}/../02_Middleware/Protocol_CanOpen/inc 
	${PROJECT_SOURCE_DIR}/../02_Middleware/Library_StdLib/inc  
	${PROJECT_SOURCE_DIR}/../02_Middleware/Library_LibLidarLms151/inc 
	${PROJECT_SOURCE_DIR}/../03_Driver/Driver_SerialDriver/inc
	${PROJECT_SOURCE_DIR}/../03_Driver/Driver_TcpSocketDriver/inc   
)

set(${PROJECT_NAME}_INCLUDE_DIRS   
  ${HDRS} 
  CACHE INTERNAL "${PROJECT_NAME}: Include Directories" FORCE)
 
include_directories(${HDRS}) 
 
add_subdirectory(../02_Middleware Build_Middleware)
add_subdirectory(../03_Driver Build_Driver) 

#--------------------------------------------------------------------------------------------------#  

add_library(Aggron STATIC ${SRCS})
target_link_libraries(Aggron
					${CMAKE_THREAD_LIBS_INIT}
					Lib_LibLidarLms151
					Lib_CanOpen 
					Lib_StdLib )    

#--------------------------------------------------------------------------------------------------# 

