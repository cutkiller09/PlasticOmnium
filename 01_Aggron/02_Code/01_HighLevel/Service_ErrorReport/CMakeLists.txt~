cmake_minimum_required(VERSION 2.8)

#--------------------------------------------------------------------------------------------------#
 
project(Service_ErrorReport) 

#--------------------------------------------------------------------------------------------------#
set (SRCS 
	./src/Service_ErrorReport.c 
) 
 
include_directories (./inc 
					../../02_Middleware/Library_StdLib/inc  
					) 

set (TI_SRCS 
	./test/TI_Service_ErrorReport.c 
)    

set (TV_SRCS  
	./test/TV_Service_ErrorReport.c
	../../01_HighLevel/Service_Command/src/Service_Command.c  
	../../01_HighLevel/Service_Data/src/Service_Data.c   
	../../01_HighLevel/Service_InertiaMobileUnit/src/Service_InertiaMobileUnit.c  
	../../01_HighLevel/Service_Lidar/src/Service_Lidar.c  
	../../01_HighLevel/Service_BatteryManager/src/Service_BatteryManager.c  
	../../01_HighLevel/Service_Motor/src/Service_Motor.c  
	../../01_HighLevel/Service_Scheduler/src/Service_Scheduler.c   
	../../01_HighLevel/Service_Configuration/src/Service_Configuration.c  
	../../01_HighLevel/Service_Calibration/src/Service_Calibration.c    
	../../01_HighLevel/Service_Signalisation/src/Service_Signalisation.c   
	../../01_HighLevel/Service_Log/src/Service_Log.c      
	../../01_HighLevel/Service_Initialization/src/Service_Initialization.c    
	../../01_HighLevel/Service_Autotests/src/Service_Autotests.c    
)     

set (TV_INC  
	../../02_Middleware/Library_LibMotorCtlXtpp/inc
	../../01_HighLevel/Service_Command/inc  
	../../01_HighLevel/Service_Data/inc 
	../../01_HighLevel/Service_Motor/inc  
	../../01_HighLevel/Service_Lidar/inc  
	../../01_HighLevel/Service_Autotests/inc  
	../../01_HighLevel/Service_Log/inc  
	../../01_HighLevel/Service_Signalisation/inc  
	../../01_HighLevel/Service_Initialization/inc  
	../../01_HighLevel/Service_Scheduler/inc 
	../../01_HighLevel/Service_Calibration/inc 
	../../01_HighLevel/Service_Configuration/inc   
	../../01_HighLevel/Service_InertiaMobileUnit/inc 
	../../01_HighLevel/Service_BatteryManager/inc  
	../../02_Middleware/Library_LibLidarS300/inc
	../../02_Middleware/Library_LibLidarUst1020lx/inc
	../../02_Middleware/Library_LibLidarLms151/inc  
	../../02_Middleware/Library_LibImuMti/inc 
	../../02_Middleware/Library_LibBatMngBmv700/inc 
	../../02_Middleware/Protocol_CanOpen/inc 
	../../03_Driver/Driver_SerialDriver/inc 
	../../03_Driver/Driver_TcpSocketDriver/inc 
	../../02_Middleware/Library_Gamepad/inc   
)     

add_subdirectory(../../02_Middleware Build_Middleware)  

#--------------------------------------------------------------------------------------------------#

add_executable(TI_ErrorReport ${SRCS} ${TI_SRCS} )   
target_include_directories (TI_ErrorReport PRIVATE
							./test/stub/ ) 
add_definitions(--coverage)  
target_link_libraries(TI_ErrorReport   
					Lib_StdLib 
					--coverage)    
set_target_properties(TI_ErrorReport PROPERTIES EXCLUDE_FROM_ALL TRUE) 

add_executable(TV_ErrorReport ${SRCS} ${TV_SRCS}) 
target_include_directories (TV_ErrorReport PRIVATE ${TV_INC})  
add_definitions(--coverage)   
target_link_libraries(TV_ErrorReport 
						Lib_MotorCtlXtpp 
						Lib_StdLib
						Lib_Gamepad
						Lib_LibLidarLms151
						Lib_LibBatMngBmv700 
						Lib_LibImuMti
						Lib_LibLidarS300
						Lib_LibLidarUst1020lx 
						Lib_CanOpen  
						m  
						--coverage)	 	 				
set_target_properties(TV_ErrorReport PROPERTIES EXCLUDE_FROM_ALL TRUE)   

#--------------------------------------------------------------------------------------------------#

# add a target to generate API documentation with Doxygen
find_package(Doxygen)
if(DOXYGEN_FOUND)
configure_file(${CMAKE_CURRENT_SOURCE_DIR}/Doxyfile.in ${CMAKE_CURRENT_BINARY_DIR}/Doxyfile @ONLY)
add_custom_target(docErrorReport
${DOXYGEN_EXECUTABLE} ${CMAKE_CURRENT_BINARY_DIR}/Doxyfile
WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
COMMENT "Generating API documentation with Doxygen" VERBATIM
)
endif(DOXYGEN_FOUND)

#--------------------------------------------------------------------------------------------------#